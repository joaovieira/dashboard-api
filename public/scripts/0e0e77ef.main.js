(function(){window.dashboard={Models:{},Collections:{},Views:{},Routers:{},init:function(){"use strict";return this.appView=new this.Views.AppView,this.router=new this.Routers.AppRouter,this.root="/",Backbone.history.start()}},$(function(){"use strict";return dashboard.init()})}).call(this),window.JST||(window.JST={}),window.JST["app/scripts/templates/alert"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n')),d(this.safe(this.message.text))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/emailform"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="email-popover">\n  <p>Take snapshot of dashboard and e-mail</p>\n  <form class="form-inline form-group" id="sendEmail" role="form">\n      <div class="input-group">  \n        <input type="email" class="form-control" id="email" name="email" placeholder="Enter e-mail">\n        <span class="input-group-btn">\n          <button class="btn btn-primary btn-search fa fa-camera" type="submit"></button>\n        </span>\n      </div>\n      <label class="control-label" for="email"></label>\n  </form>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/modal/category"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="col-sm-12 col-md-5 widget-description">\n  <div class="thumbnail">\n    <img src="" alt="')),d(this.widget.name),d(b('" class="')),d(this.widget.get("name")),d(b('">\n  </div>\n  <div class="caption">\n    <h4>Widget description</h3>\n    <p>')),d(this.widget.get("description")),d(b('</p>\n  </div>\n</div>\n<div class="col-sm-12 col-md-6 col-md-offset-1 widget-form">\n  Widget not supported.\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/modal/thumbnails"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f;for(d(b('<div class="row">\n    ')),f=this.thumbnails,c=0,e=f.length;e>c;c++)a=f[c],d(b('\n      <div class="col-sm-6 col-md-3">  \n        <a href="#new/')),d(null!=this.base?""+this.base+"/"+a.get("name"):a.get("name")),d(b('" class="thumbnail">\n          <img src="" title="')),d(a.get("title")),d(b('" alt="')),d(a.get("title")),d(b('" class="')),d(a.get("name")),d(b('">\n        </a>\n      </div>\n    '));d(b("\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/widgets/add/widget"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="widget-content">\n  <div class="wrapper">\n    ')),d(""+this.widget.get("title").toUpperCase()),d(b("\n  </div>\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/widgets/base"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="front">\n  <div class="widget-header">\n    <div class="wrapper">\n      <div class="widget-controls">\n        <handle class="fa fa-arrows-alt"></handle>\n        <i class="fa fa-cogs clickable settings"></i>\n      </div>\n      <div class="widget-title">\n        <i class="title-icon fa ')),d(this.widget.get("icon")),d(b(' fa-lg"/>\n        <span class="title-text">')),d(this.widget.get("name")),d(b('</span> \n      </div>\n    </div>\n  </div>\n  <div class="widget-content">\n    <div class="wrapper">\n      <div id="inputs">\n        <div class="loading">\n          <i class="fa fa-refresh fa-spin fa-3x refresh"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="back face-hidden">\n  <div class="widget-header">\n    <div class="wrapper">\n      <div class="widget-controls">\n        <td class="settings-save">\n          <i data-toggle="tooltip" title="" data-original-title="save settings" class="fa fa-check fa-tooltip clickable"></i>\n        </td>\n        <td class="widget-remove">\n          <i data-toggle="tooltip" title="" data-original-title="remove widget" class="fa fa-trash-o fa-tooltip clickable"></i>\n        </td>\n        <i class="fa fa-times settings-close clickable"></i>\n      </div>\n      <div class="widget-title">\n        <span class="title-text">Settings</span> \n      </div>\n    </div>\n  </div>\n  <div class="widget-content clearfix">\n  </div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/widgets/favorites/category"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<form class="form-horizontal widget-data" id="createWidget" role="form">    \n  <div class="form-group">\n    <label for="name" class="col-sm-4 form-header">Name</label>\n    <div class="col-sm-8">\n      <input type="text" class="form-control" id="name" name="name" placeholder="Name in dashboard">\n      <label class=\'control-label\' for=\'name\'></label>\n    </div>\n  </div>\n</form>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/widgets/favorites/rowinput"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<td class="favorite">\n  <i data-toggle="tooltip" title="" data-original-title="')),d(""+this.input.get("occupation")+"%"),d(b('" class="fa fa-tooltip ')),d(this.occupation()),d(b('"></i>\n</td>\n<td class="title">')),d(this.input.get("title")),d(b("</td>\n<td>")),d(this.input.get("description")),d(b('</td>\n<td class="map">\n  <i data-toggle="tooltip" title="" data-original-title="view on map" class="fa fa-map-marker fa-tooltip clickable"></i>\n</td>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/widgets/favorites/settings"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<form class="form-horizontal widget-settings" id="editSettings" role="form">    \n  <div class="form-group">\n    <label for="name" class="col-sm-4 form-header">Name</label>\n    <div class="col-sm-8">\n      <input type="text" class="form-control" id="name" name="name" placeholder="Name in dashboard">\n      <label class=\'control-label\' for=\'name\'></label>\n    </div>\n  </div>\n</form>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/widgets/lastinputs/category"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f;for(d(b('<form class="form-horizontal widget-data" id="createWidget" role="form">    \n  <div class="form-group">\n    <label for="name" class="col-sm-4 form-header">Name</label>\n    <div class="col-sm-8">\n      <input type="text" class="form-control" id="name" name="name" placeholder="Name in dashboard">\n      <label class=\'control-label\' for=\'name\'></label>\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="site" class="col-sm-4 form-header">Site</label>\n    <div class="col-sm-8">  \n      <select class="form-control" id="site" name="site" placeholder="Site">\n        <option selected disabled>Select one</option>\n        ')),f=this.widget.get("sites"),c=0,e=f.length;e>c;c++)a=f[c],d(b('  \n          <option value="')),d(a.url),d(b('">')),d(a.title),d(b("</option>\n        "));d(b('\n      </select>\n      <label class=\'control-label\' for=\'site\'></label>\n      <span class="help-block">Which site do you want to track?</span>\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="refreshTime" class="col-sm-4 form-header">Refresh times</label>\n    <div class="col-sm-8">\n      <select class="form-control" id="refreshTime" name="refreshTime" placeholder="Refresh times">\n        <option selected disabled>Select one</option>\n        <option value="10000">10 segundos</option>\n        <option value="30000">30 segundos</option>\n      </select>\n      <label class=\'control-label\' for=\'refreshTime\'></label>\n    </div>\n  </div>\n</form>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/widgets/lastinputs/rowinput"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<td class="favorite">\n  <i data-toggle="tooltip" title="" data-original-title="add to favorites" class="fa fa-star fa-tooltip clickable ')),d(this.input.get("favorite")?"selected":""),d(b('"></i>\n</td>\n<td class="title">')),d(this.input.get("title")),d(b("</td>\n<td>")),d(this.input.get("description")),d(b("</td>\n<td>")),d(this.input.get("timestamp")),d(b("</td>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["app/scripts/templates/widgets/lastinputs/settings"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<form class="form-horizontal widget-settings" id="editSettings" role="form">    \n  <div class="form-group">\n    <label for="name" class="col-sm-4 form-header">Name</label>\n    <div class="col-sm-8">\n      <input type="text" class="form-control" id="name" name="name" placeholder="Name in dashboard">\n      <label class=\'control-label\' for=\'name\'></label>\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="site" class="col-sm-4 form-header">Site</label>\n    <div class="col-sm-8">  \n      <select class="form-control" id="site" name="site" placeholder="Site">\n        <option selected disabled>Select one</option>\n      </select>\n      <label class=\'control-label\' for=\'site\'></label>\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="refreshTime" class="col-sm-4 form-header">Refresh times</label>\n    <div class="col-sm-8">\n      <select class="form-control" id="refreshTime" name="refreshTime" placeholder="Refresh times">\n        <option selected disabled>Select one</option>\n        <option value="10000">10 segundos</option>\n        <option value="30000">30 segundos</option>\n      </select>\n      <label class=\'control-label\' for=\'refreshTime\'></label>\n    </div>\n  </div>\n</form>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Routers.AppRouter=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.routes={"":"home","new":"selectCategory","new/:category":"selectWidget","new/:category/:widget":"showWidget"},d.prototype.home=function(){return dashboard.appView.home()},d.prototype.selectCategory=function(){return dashboard.appView.addWidgetModal()},d.prototype.selectWidget=function(a){return dashboard.appView.addWidgetModal(a)},d.prototype.showWidget=function(a,b){return dashboard.appView.addWidgetModal(a,b)},d}(Backbone.Router),$(document).on("click","a:not([data-bypass])",function(a){var b;return b=$(this).attr("href"),b&&0===b.indexOf("#")?(a.preventDefault(),Backbone.history.navigate(b,!0)):void 0})}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Models.Widget=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.defaults={type:"empty"},d}(Backbone.Model)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Models.AddWidget=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.defaults={type:"add",title:"Add widget"},d}(dashboard.Models.Widget)}.call(this),function(){"use strict";var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Models.LastInputsWidget=function(b){function d(){this.refresh=a(this.refresh,this),this.inputs=new dashboard.Collections.LastInputs,Backbone.Model.apply(this,arguments)}return c(d,b),d.prototype.defaults={icon:"fa-clock-o",type:"last-inputs",site:"",name:"",refreshTime:0},d.prototype.validate=function(a){var b;return b=[],a.name||b.push({name:"Name cannot be blank"}),a.site||b.push({site:"Please select a site"}),a.refreshTime||b.push({refreshTime:"Please select an interval"}),b.length?b:void 0},d.prototype.refresh=function(){var a=this;return $.getJSON(this.get("site"),function(b){var c,d,e,f;for(e=0,f=b.length;f>e;e++)c=b[e],d=a.inputs.findWhere({feed_id:c.feed_id}),null!=d?d.set(c):a.inputs.add(new dashboard.Models.LastInput(c));return a.trigger("change"),setTimeout(a.refresh,a.get("refreshTime"))})},d.prototype.parse=function(a){return this.inputs.reset(a.inputs),a},d.prototype.toJSON=function(){var a;return a=_.clone(this.attributes),a.inputs=this.inputs.toJSON(),a},d}(dashboard.Models.Widget)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Models.LastInput=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.idAttribute="feed_id",d.prototype.defaults={favorite:!1,occupation:0,coordinates:{latitude:0,longitude:0}},d}(Backbone.Model)}.call(this),function(){"use strict";var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Models.FavoritesWidget=function(b){function d(){this.refresh=a(this.refresh,this),this.inputs=new dashboard.Collections.LastInputs,this.inputs.on("all",this.refresh),Backbone.Model.apply(this,arguments)}return c(d,b),d.prototype.defaults={icon:"fa-star",type:"favorites",name:""},d.prototype.validate=function(a){var b;return b=[],a.name||b.push({name:"Name cannot be blank"}),b.length?b:void 0},d.prototype.refresh=function(){return this.trigger("update")},d.prototype.parse=function(a){return this.inputs.reset(a.inputs),a},d.prototype.toJSON=function(){var a;return a=_.clone(this.attributes),a.inputs=this.inputs.toJSON(),a},d}(dashboard.Models.Widget)}.call(this),function(){"use strict";var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};dashboard.Models.Category=function(a){function c(){this.widgets=new dashboard.Collections.WidgetsCategory,this.widgets.on("change",this.save),Backbone.Model.apply(this,arguments)}return b(c,a),c.prototype.parse=function(a){return this.widgets.reset(a.widgets),a},c.prototype.toJSON=function(){var a;return a=_.clone(this.attributes),a.widgets=this.widgets.toJSON(),a},c}(Backbone.Model)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Models.WidgetCategory=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d}(Backbone.Model)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Collections.Categories=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.model=dashboard.Models.Category,d.prototype.url="/api/categories",d}(Backbone.Collection)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Collections.WidgetsCategory=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.model=dashboard.Models.WidgetCategory,d}(Backbone.Collection)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Collections.LastInputs=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.model=dashboard.Models.LastInput,d}(Backbone.Collection)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Collections.Widgets=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.model=function(a,b){switch(a.type){case"last-inputs":return new dashboard.Models.LastInputsWidget(a,b);case"favorites":return new dashboard.Models.LastInputsWidget(a,b);case"add":return new dashboard.Models.AddWidget(a,b);default:return new dashboard.Models.Widget(a,b)}},d}(Backbone.Collection)}.call(this),function(){"use strict";var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};dashboard.Views.AppView=function(c){function e(){return this.showAlert=b(this.showAlert,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el="#dashboard",e.prototype.initialize=function(){return this.menu=new dashboard.Views.NavigationView({el:$("#navigation")}),this.widgets=new dashboard.Views.WidgetsView({el:$("#widgets")}),this.modal=new dashboard.Views.ModalView({el:$("#new-widget-modal")}),this.listenTo(this.menu,"alert",this.showAlert),this.listenTo(this.menu,"new",this.showModal),this.listenTo(this.widgets,"new",this.showModal)},e.prototype.home=function(){return this.$("#alert").show()},e.prototype.showAlert=function(a){var b;return b=new dashboard.Views.AlertView(a),this.$("#alert").html(b.render().el).show()},e.prototype.addWidgetModal=function(a,b){return null==a&&(a=null),null==b&&(b=null),this.modal.prepare(a,b),this.modal.show()},e}(Backbone.View)}.call(this),function(){"use strict";var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};dashboard.Views.NavigationView=function(c){function e(){return this.sendEmail=b(this.sendEmail,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.emailFormTemplate=JST["app/scripts/templates/emailform"],e.prototype.events={"click li#tv":"enterFullScreen","click li#email":"toggleEmail","submit #sendEmail":"sendEmail","change .form-group.has-error .form-control":"removeError"},e.prototype.initialize=function(){return this.$("li#email a").popover({html:!0,content:this.emailFormTemplate})},e.prototype.enterFullScreen=function(){return screenfull.enabled?screenfull.request():this.alertError()},e.prototype.alertError=function(){return this.trigger("alert",{type:"danger",text:"Oh snap! Full screen not suported."})},e.prototype.toggleEmail=function(a){return this.$(a.currentTarget).toggleClass("selected")},e.prototype.sendEmail=function(a){var b,c=this;return a.preventDefault(),b=Backbone.Syphon.serialize(this),b.email?(this.$("li#email a").popover("hide"),html2canvas(document.body,{onrendered:function(a){var d,e;return e=a.toDataURL("image/png"),d=new Date,$.post("/api/snapshot",{name:"dashboard-"+d.getTime()+".png",image:e.split(",")[1],email:b.email},c.alertMailSuccess(b.email))}})):this.$("#sendEmail .control-label").text("Enter an email").fadeIn("fast").closest(".form-group").addClass("has-error")},e.prototype.removeError=function(a){return a.target.value?$(a.target).parent().nextAll(".control-label").hide().closest(".form-group").removeClass("has-error"):void 0},e.prototype.alertMailSuccess=function(a){return this.trigger("alert",{type:"success",text:"Snapshot sent to <strong>"+a+"</strong> with success."})},e}(Backbone.View),$("body").on("click",function(a){return $("li#email a").each(function(){return $(this).is(a.target)||$(this).has(a.target).length||$(".popover").has(a.target).length?void 0:($(this).parent().removeClass("selected"),$(this).popover("hide"))})})}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Views.AlertView=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.className="alert alert-dismissable fade in",d.prototype.template=JST["app/scripts/templates/alert"],d.prototype.initialize=function(a){return null==a&&(a={}),this.message=a,this.$el.addClass(" alert-"+this.message.type),this},d.prototype.render=function(){return this.$el.html(this.template({message:this.message})),this},d}(Backbone.View)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Views.ModalView=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.thumbnailTemplate=JST["app/scripts/templates/modal/thumbnails"],d.prototype.events=function(){return{"submit #createWidget":"createWidget","change .form-group.has-error .form-control":"removeError"}},d.prototype.initialize=function(){return this.categories=new dashboard.Collections.Categories,this.$el.modal({show:!1}),this.$el.on("hidden.bs.modal",this.returnHome),this.categories.fetch()},d.prototype.show=function(){return this.$el.modal("show")},d.prototype.prepare=function(a,b){var c,d;return this.category=this.categories.findWhere({name:a}),this.widget=this.category?this.category.widgets.findWhere({name:b}):void 0,c=this.$(".breadcrumb").empty(),this.$(".search").show(),this.$(".btn-add").hide(),c.append("<li class='active'>Add widget</li>"),this.category&&(c.find("li:last").removeClass("active").wrapInner("<a href='#new'></a>"),c.append("<li class='active'>"+this.category.get("title")+"</li>")),this.widget&&(c.find("li:last").removeClass("active").wrapInner("<a href='#new/"+this.category.get("name")+"'></a>"),c.append("<li class='active'>"+this.widget.get("title")+"</li>"),this.$(".search").hide(),this.$(".btn-add").attr("form","createWidget").show()),d=this.widget?this.widgetCategoryView().render().el:this.category?this.thumbnailTemplate({thumbnails:this.category.widgets.models,base:this.category.get("name")}):this.thumbnailTemplate({thumbnails:this.categories.models}),this.$(".modal-body-content").fadeTo(400,0,function(){return $(this).html(d).find("select").selectpicker(),$(this).fadeTo(400,1)})},d.prototype.widgetCategoryView=function(){switch(this.widget.get("name")){case"last-inputs":return new dashboard.Views.LastInputsCategoryView({model:this.widget});case"favorites":return new dashboard.Views.FavoritesCategoryView({model:this.widget});default:return new dashboard.Views.CategoryView({model:this.widget})}},d.prototype.createWidget=function(a){var b,c,d;return a.preventDefault(),b=Backbone.Syphon.serialize(this),d=function(){switch(this.widget.get("name")){case"last-inputs":return new dashboard.Models.LastInputsWidget(b,{validate:!0});case"favorites":return new dashboard.Models.FavoritesWidget(b,{validate:!0});default:return new dashboard.Models.Widget(b,{validate:!0})}}.call(this),(c=d.validationError)?this.renderErrors(c):(dashboard.appView.widgets.createWidget(d),this.$el.modal("hide"))},d.prototype.renderErrors=function(a){var b,c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)b=a[d],f.push(function(){var a;a=[];for(c in b)a.push(this.$(".form-control#"+c).nextAll(".control-label").text(b[c]).fadeIn("fast").closest(".form-group").addClass("has-error"));return a}.call(this));return f},d.prototype.removeError=function(a){var b;return b=$(a.target).is(".dropdown-toggle")?$(a.target).parent().prev()[0]:a.target,b.value?$(b).nextAll(".control-label").hide().closest(".form-group").removeClass("has-error"):void 0},d.prototype.returnHome=function(){return dashboard.router.navigate("")},d}(Backbone.View)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Views.CategoryView=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.tagName="div",d.prototype.className="row widget-category",d.prototype.template=JST["app/scripts/templates/modal/category"],d.prototype.render=function(){return this.$el.html(this.template({widget:this.model})),this},d}(Backbone.View)}.call(this),function(){"use strict";var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};dashboard.Views.WidgetView=function(c){function e(){return this.remove=b(this.remove,this),this.unrender=b(this.unrender,this),this.render=b(this.render,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.tagName="li",e.prototype.className="widget",e.prototype.template=JST["app/scripts/templates/widgets/base"],e.prototype.events={"click tr.input":"highlight","click .delete":"remove","click .settings":"editSettings","click .save":"saveSettings","click .settings-close":"viewWidget"},e.prototype.initialize=function(){return this.className+=this.model.get("type"),this.model.on("change",this.render),this.model.on("remove",this.unrender),this.defaultSize=[1,1]},e.prototype.render=function(){return this.$el.html(this.template({widget:this.model})),null!=this.settingsTemplate&&(this.$(".back .widget-content").html(this.settingsTemplate()),this.$("select").selectpicker(),this.$(".fa-tooltip").tooltip({placement:"bottom"})),this},e.prototype.highlight=function(a){return this.$(a.currentTarget).toggleClass("active").siblings().removeClass("active")},e.prototype.editSettings=function(a){return this.$(a.currentTarget).closest(".widget").toggleClass("flip")},e.prototype.viewWidget=function(a){return this.$(a.currentTarget).closest(".widget").removeClass("flip")},e.prototype.unrender=function(){return this.$el.remove(),this},e.prototype.remove=function(){return this.model.destroy()},e}(Backbone.View)}.call(this),function(){"use strict";var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};dashboard.Views.WidgetsView=function(c){function e(){return this.showLast=b(this.showLast,this),this.removeWidget=b(this.removeWidget,this),this.addWidget=b(this.addWidget,this),a=e.__super__.constructor.apply(this,arguments)
}return d(e,c),e.prototype.initialize=function(){var a;return this.collection=new dashboard.Collections.Widgets([]),a={widget_margins:[15,15],widget_base_dimensions:[this.$el.data("column-size"),this.$el.data("column-size")],max_cols:this.$el.data("columns"),min_rows:2,draggable:{handle:"handle"},resize:{enabled:!0,max_size:[2,2]}},this.gridster=this.$("ul").gridster(a).data("gridster"),this.collection.on("add",this.addWidget),this.collection.on("remove",this.removeWidget),this.addAddWidget()},e.prototype.addWidget=function(a){var b,c;return c=this.getView(a),b=this.gridster.$widgets.filter(".add"),1===b.length?(this.overrideAddWidget(b,c),this.addAddWidget()):this.gridster.add_widget(c.render().el,c.defaultSize[0],c.defaultSize[1],null,null,null!=c.maxSize?c.maxSize:c.maxSize=[]),this.showLast()},e.prototype.removeWidget=function(a){var b;return b=this.gridster.$widgets.filter("."+a.get("type")),this.gridster.remove_widget(b,this.showLast)},e.prototype.createWidget=function(a){return this.collection.add(a)},e.prototype.overrideAddWidget=function(a,b){var c,d,e;return d=a.data("col"),e=a.data("row"),c=this.collection.findWhere({type:"add"}),this.collection.remove(c),this.gridster.add_widget(b.render().el,b.defaultSize[0],b.defaultSize[1],d,e,null!=b.maxSize?b.maxSize:b.maxSize=[])},e.prototype.addAddWidget=function(){return this.collection.add(new dashboard.Models.AddWidget)},e.prototype.getWidget=function(a){return this.collection.findWhere({type:a})},e.prototype.getView=function(a){switch(a.get("type")){case"last-inputs":return new dashboard.Views.LastInputsWidgetView({model:a});case"favorites":return new dashboard.Views.FavoritesWidgetView({model:a});case"add":return new dashboard.Views.AddWidgetView({model:a});default:return new dashboard.Views.WidgetView({model:a})}},e.prototype.showLast=function(){return this.gridster.$widgets.length===this.collection.length?this.$el.fadeIn():void 0},e.prototype.addFavorite=function(a){var b;return(b=this.getWidget("favorites"))?b.inputs.add(a):void 0},e.prototype.removeFavorite=function(a){var b;return(b=this.getWidget("favorites"))?b.inputs.remove(a):void 0},e}(Backbone.View)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Views.AddWidgetView=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.tagName="li",d.prototype.className="widget add",d.prototype.template=JST["app/scripts/templates/widgets/add/widget"],d.prototype.genericEvents={"click .widget-content":"newWidget"},d.prototype.initialize=function(){return this.events=_.extend({},this.genericEvents,this.events),this.delegateEvents(),this.defaultSize=[1,1],this.maxSize=[1,1]},d.prototype.render=function(){return this.$el.html(this.template({widget:this.model})),this},d.prototype.newWidget=function(){return dashboard.router.navigate("new",{trigger:!0})},d}(Backbone.View)}.call(this),function(){"use strict";var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};dashboard.Views.LastInputsWidgetView=function(c){function e(){return this.refresh=b(this.refresh,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.settingsTemplate=JST["app/scripts/templates/widgets/lastinputs/settings"],e.prototype.events=_.extend({"click .fa-star":"addFavorite"},dashboard.Views.WidgetView.prototype.events),e.prototype.initialize=function(){return this.defaultSize=[2,1],this.model.on("change",this.refresh),this.model.refresh()},e.prototype.render=function(){return e.__super__.render.call(this),this},e.prototype.refresh=function(){return this.$("#inputs").html('<table class="table table-striped table-hover"></table>'),this.model.inputs.each(function(a){var b;return b=new dashboard.Views.LastInputView({model:a}),this.$("#inputs table").append(b.render().el)},this)},e.prototype.addFavorite=function(a){var b,c;return a.stopPropagation(),this.$(a.currentTarget).toggleClass("selected"),b=this.$(".favorite i").index(a.currentTarget),c=this.model.inputs.at(b),c.set("favorite",!c.get("favorite")),c.get("favorite")?dashboard.appView.widgets.addFavorite(c):dashboard.appView.widgets.removeFavorite(c)},e}(dashboard.Views.WidgetView)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Views.LastInputView=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.tagName="tr",d.prototype.className="input",d.prototype.template=JST["app/scripts/templates/widgets/lastinputs/rowinput"],d.prototype.render=function(){return this.$el.html(this.template({input:this.model})),this.$(".fa-tooltip").tooltip({placement:"bottom"}),this},d}(Backbone.View)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Views.LastInputsCategoryView=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.formTemplate=JST["app/scripts/templates/widgets/lastinputs/category"],d.prototype.render=function(){return d.__super__.render.call(this),this.$(".widget-form").html(this.formTemplate({widget:this.model})),this},d}(dashboard.Views.CategoryView)}.call(this),function(){"use strict";var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};dashboard.Views.FavoritesWidgetView=function(c){function e(){return this.refresh=b(this.refresh,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.settingsTemplate=JST["app/scripts/templates/widgets/favorites/settings"],e.prototype.events=_.extend({"click .fa-map-marker":"viewOnMap"},dashboard.Views.WidgetView.prototype.events),e.prototype.initialize=function(){var a,b,c,d,e;if(this.defaultSize=[2,1],this.model.on("update",this.refresh),c=dashboard.appView.widgets.getWidget("last-inputs")){for(a=c.inputs.where({favorite:!0}),d=0,e=a.length;e>d;d++)b=a[d],this.model.inputs.add(b);if(a.length)return setTimeout(this.refresh,100)}},e.prototype.render=function(){return e.__super__.render.call(this),this.renderEmpty(),this},e.prototype.refresh=function(){return this.model.inputs.length?(this.$("#inputs").html('<table class="table table-striped table-hover"></table>'),this.model.inputs.each(function(a){var b;return b=new dashboard.Views.FavoriteInputView({model:a}),this.$("#inputs table").append(b.render().el)},this)):this.renderEmpty()},e.prototype.renderEmpty=function(){return this.$("#inputs").html("<div class='loading'>"+"No favorite inputs".toUpperCase()+"</div>")},e.prototype.viewOnMap=function(){},e}(dashboard.Views.WidgetView)}.call(this),function(){"use strict";var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};dashboard.Views.FavoriteInputView=function(c){function e(){return this.capacityStatus=b(this.capacityStatus,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.tagName="tr",e.prototype.className="input",e.prototype.template=JST["app/scripts/templates/widgets/favorites/rowinput"],e.prototype.render=function(){return this.$el.html(this.template({input:this.model,occupation:this.capacityStatus})),this.$(".fa-tooltip").tooltip({placement:"bottom"}),this},e.prototype.capacityStatus=function(){var a;return a=this.model.get("occupation"),a>=0&&25>a?"fa-circle-o occupation-quarter":a>=25&&50>a?"fa-adjust occupation-half":a>=50&&75>a?"fa-adjust occupation-almost-full":"fa-circle occupation-full"},e}(Backbone.View)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};dashboard.Views.FavoritesCategoryView=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.formTemplate=JST["app/scripts/templates/widgets/favorites/category"],d.prototype.render=function(){return d.__super__.render.call(this),this.$(".widget-form").html(this.formTemplate({widget:this.model})),this},d}(dashboard.Views.CategoryView)}.call(this);